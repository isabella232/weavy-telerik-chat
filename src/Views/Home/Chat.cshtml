@{
    ViewBag.Title = "Contact";
}

<section class="jumbotron text-center">
    <div class="container">
        <h1>
            Telerik Conversational UI - Powered by Weavy backend
        </h1>
    </div>
</section>

<div class="row">
    <div class="col-4">

        <div class="demo-section k-content wide">
            <div id="listView"></div>
            <p id="no-conversations" class="text-center d-none">
                There are no conversations.
            </p>
            <div class="m-2 text-center">
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#new-conversation">
                    New Conversation
                </button>
            </div>
        </div>

        <script type="text/x-kendo-template" id="template">
            #if(isRead){#
            <div class="conversation" data-id="#:id#">
            #}else{#
            <div class="conversation unread" data-id="#:id#">
            #}#
                <img src="#:thumb#" alt="" />
                <h3>#:title#</h3>
                #if(typeof(lastMessage) !== "undefined"){#
                    <p>#:lastMessage.text#</p>
                #}#
            </div>
        </script>
        <style>


        </style>
    </div>
    <div class="col-8">
        <div class="demo-section k-content" id="chat"></div>
    </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" id="new-conversation">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">New Conversation</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <select id="users"></select>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="create-conversation">Create</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>

@section scripts {
    <script>
        Chat.init();
    </script>

    <!-- Load Promise Polyfill. Required by the DialogFlow Client API.-->
    <script src="https://www.promisejs.org/polyfills/promise-6.1.0.js"></script>

    <!-- Load DialogFlow Client API -->
    <script src="https://cdn.rawgit.com/dialogflow/dialogflow-javascript-client/50e82e62/target/ApiAi.min.js"></script>
}
